<div class="ticketreply-management-container">
  <h2 class="ticketreply-header">Ticket Reply Management</h2>

  <div class="form-card">
    <form class="ticketreply-form">
      <div class="single-row-form">
        <div class="form-group">
          <label for="replyId" class="form-label">Reply ID</label>
          <div class="input-with-button">
            <input type="text" id="replyId" [(ngModel)]="reply.replyId" name="replyId" class="form-input" placeholder="Enter ID" />
            <!-- <button type="button" class="inline-btn show-btn" (click)="getReply()">ğŸ‘ï¸ Show</button> -->
          </div>
        </div>

        <div class="form-group">
          <label for="ticketId" class="form-label">Ticket ID</label>
          <select id="ticketId" [(ngModel)]="reply.ticketId" (ngModelChange)="onTicketIdChange($event)" name="ticketId" class="form-input">
            <option value="">Select Ticket</option>
            <option *ngFor="let t of tickets" [value]="t.ticketId">{{ t.ticketId }}</option>
          </select>
        </div>

        <div class="form-group">
          <label for="replier" class="form-label">Select Replier</label>
          <select id="replier" [(ngModel)]="replier" (ngModelChange)="onReplierChange($event)" name="replier" class="form-input">
            <option value="">Select Replier</option>
            <option value="creator">Creator</option>
            <option value="assigner">Assigner</option>
          </select>
        </div>
      </div>

      <div class="single-row-form">
        <div class="form-group form-group-wide">
          <label for="replyMessage" class="form-label">Reply Message</label>
          <textarea id="replyMessage" [(ngModel)]="reply.replyMessage" name="replyMessage" class="form-input form-textarea" placeholder="Enter reply message"></textarea>
        </div>

        <!-- <div class="form-group">
          <div *ngIf="replier === 'assigner'" class="replier-field">
            <label for="replyByCreatorEmpId" class="form-label">Creator Emp ID</label>
            <input type="text" id="replyByCreatorEmpId" [(ngModel)]="createIdStore" name="replyByCreatorEmpId" class="form-input" placeholder="Creator ID" disabled />
          </div>
          
          <div *ngIf="replier === 'creator'" class="replier-field">
            <label for="replyByAssignedEmpId" class="form-label">Assigned Emp ID</label>
            <input type="text" id="replyByAssignedEmpId" [(ngModel)]="assignIdStore" name="replyByAssignedEmpId" class="form-input" placeholder="Assigned ID" disabled />
          </div> -->
          
          <!-- <div *ngIf="!replier" class="replier-placeholder">
            <div class="placeholder-text">Select replier above</div>
          </div>
        </div> -->
      </div>

      <div class="action-buttons">
        <button type="button" class="action-btn add-btn" (click)="addReply()">ğŸ’¾ Save</button>
        <button type="button" class="action-btn update-btn" (click)="updateReply()">â†» Update</button>
        <button type="button" class="action-btn delete-btn" (click)="deleteReply()">ğŸ—‘ï¸ Delete</button>
        <button type="button" class="action-btn show-all-btn" (click)="getReply()">ğŸ‘ï¸ Show</button>
      </div>

      <div *ngIf="errMsg" class="error-message">âš ï¸ {{ errMsg }}</div>
    </form>
  </div>

  <h3 class="list-header">List of Ticket Replies</h3>

  <div class="table-card">
    <div class="table-wrapper">
      <table class="ticketreplies-table">
        <thead>
          <tr>
            <th>Reply ID</th>
            <th>Ticket ID</th>
            <th>Message</th>
            <th>Creator</th>
            <th>Assigned</th>
          </tr>
        </thead>
        <tbody>
          @for (r of replies; track r) {
          <tr>
            <td><span class="reply-id">{{ r.replyId }}</span></td>
            <td><span class="ticket-id">{{ r.ticketId }}</span></td>
            <td class="message-cell">{{ r.replyMessage }}</td>
            <td>{{ r.replyByCreatorEmpId }}</td>
            <td>{{ r.replyByAssignedEmpId }}</td>
          </tr>
          }
          @empty {
          <tr>
            <td colspan="5" class="no-data">ğŸ“­ No replies found</td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>